<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live Data Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <h1 class="blinking">DONNIE STORE TANZANIA</h1>

  <div class="carousel-container">
    <div id="carousel" class="carousel"></div>
  </div>

  <div id="product-info" class="product-info">
    <p class="value">Small = <span id="smallVal"></span> Pieces</p>
    <p class="value">Medium = <span id="mediumVal"></span> Pieces</p>
    <p class="value">Large = <span id="largeVal"></span> Pieces</p>
    <p class="value">XL = <span id="xlVal"></span> Pieces</p>
    <p class="value">XXL = <span id="xxlVal"></span> Pieces</p>
  </div>

  <footer>
    <p>
      <a href="https://www.instagram.com/donnie_store_tz?igsh=MTI4cTR1aHVxbjZ2eA==" target="_blank">Instagram</a> |
      <a href="https://wa.me/255764669212" target="_blank">WhatsApp</a>
    </p>
  </footer>

  <script>
    let productData = [];

    fetch("https://script.google.com/macros/s/AKfycbxdF9ug4RcdIU0RmRlB5IjdvQbn-ajCnYKSuOsUGFJwjbrwwLjrQdgBVannl1Xtuw7Qsw/exec")
      .then(res => res.json())
      .then(data => {
        productData = data;
        const carousel = document.getElementById("carousel");
        data.forEach((entry, index) => {
          const img = document.createElement("img");
          img.src = entry.ImageURL;
          img.alt = `Product ${index + 1}`;
          img.className = "carousel-image";
          img.dataset.index = index;
          carousel.appendChild(img);
        });
        updateProductInfo(0);
      })
      .catch(err => console.error("Error loading data", err));

    function updateProductInfo(index) {
      const entry = productData[index];
      if (!entry) return;
      document.getElementById("smallVal").textContent = entry.Small;
      document.getElementById("mediumVal").textContent = entry.Medium;
      document.getElementById("largeVal").textContent = entry.Large;
      document.getElementById("xlVal").textContent = entry.XL;
      document.getElementById("xxlVal").textContent = entry.XXL;
    }

    document.addEventListener("scroll", () => {
      const carousel = document.getElementById("carousel");
      const scrollLeft = carousel.scrollLeft;
      const childWidth = carousel.firstChild?.offsetWidth || 1;
      const index = Math.round(scrollLeft / childWidth);
      updateProductInfo(index);
    });
  </script>

</body>
</html>
