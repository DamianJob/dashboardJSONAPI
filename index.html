<!DOCTYPE html>
<html lang="sw">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Donnie Store Tanzania</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Heading -->
  <h1 class="blinking">DONNIE STORE TANZANIA</h1>

  <!-- Logo and Introduction -->
  <div class="intro-section">
    <img src="logo.jpg" alt="DonniestoreTZ Logo" class="logo" />
    <p class="intro-text">
      Karibuni sana Duka letu la DonniestoreTZ ujipatie bidhaa bora mjini Daslam. Tunapatikana Kariakoo mtaa wa Kongo na Narungombe. Ukishashuka mwendo kasi wa Msimbazi ukaingia mtaa wa Narungombe moja kwa moja hadi ghorofa la kwanza unakua ushafika.
      <br /><br />
      Kwa wale wanaotumia Google Maps. Bonyeza link hii kutufikia:
      <a href="https://maps.google.com" target="_blank">Google Maps</a>
    </p>
  </div>

  <!-- Carousel Section -->
  <div id="carousel-container">
    <button class="nav left">&#10094;</button>
    <div id="carousel">
      <div id="imageTrack"></div>
    </div>
    <button class="nav right">&#10095;</button>
  </div>

  <!-- Dynamic Info Section -->
  <div id="productInfo" class="product-info"></div>

  <!-- Footer Section -->
  <footer>
    <h2>Wasiliana nasi</h2>
    <p>
      <a href="https://www.instagram.com/donnie_store_tz?igsh=MTI4cTR1aHVxbjZ2eA==" target="_blank">
        <img src="instagram-icon.png" alt="Instagram" class="icon" /> Instagram
      </a>
      |
      <a href="https://wa.me/255764669212" target="_blank">
        <img src="whatsapp-icon.png" alt="WhatsApp" class="icon" /> WhatsApp
      </a>
    </p>
  </footer>

  <!-- Script -->
  <script>
    window.onload = function () {
      fetch("https://script.google.com/macros/s/AKfycbxdF9ug4RcdIU0RmRlB5IjdvQbn-ajCnYKSuOsUGFJwjbrwwLjrQdgBVannl1Xtuw7Qsw/exec" + "?t=" + new Date().getTime())
        .then(res => res.json())
        .then(data => {
          const imageTrack = document.getElementById("imageTrack");
          const info = document.getElementById("productInfo");
          const carousel = document.getElementById("carousel");
          const leftBtn = document.querySelector(".nav.left");
          const rightBtn = document.querySelector(".nav.right");

          data.forEach((entry, index) => {
            const img = document.createElement("img");
            img.src = entry.ImageURL;
            img.alt = "Product Image";
            img.dataset.index = index;
            img.classList.add("carousel-img");
            imageTrack.appendChild(img);
          });

          const images = document.querySelectorAll(".carousel-img");
          let currentIndex = 0;

          function showProductInfo(entry) {
            info.innerHTML = `
              <p class="value">Small = ${entry.Small} Pieces</p>
              <p class="value">Medium = ${entry.Medium} Pieces</p>
              <p class="value">Large = ${entry.Large} Pieces</p>
              <p class="value">XL = ${entry.XL} Pieces</p>
              <p class="value">XXL = ${entry.XXL} Pieces</p>
            `;
          }

          showProductInfo(data[0]);

          carousel.addEventListener("scroll", () => {
            const scrollLeft = carousel.scrollLeft;
            const imageWidth = images[0].offsetWidth + 16;
            const newIndex = Math.round(scrollLeft / imageWidth);

            if (newIndex !== currentIndex && data[newIndex]) {
              currentIndex = newIndex;
              showProductInfo(data[currentIndex]);
            }
          });

          leftBtn.addEventListener("click", () => {
            if (currentIndex > 0) {
              currentIndex--;
              carousel.scrollTo({
                left: currentIndex * (images[0].offsetWidth + 16),
                behavior: "smooth"
              });
              showProductInfo(data[currentIndex]);
            }
          });

          rightBtn.addEventListener("click", () => {
            if (currentIndex < data.length - 1) {
              currentIndex++;
              carousel.scrollTo({
                left: currentIndex * (images[0].offsetWidth + 16),
                behavior: "smooth"
              });
              showProductInfo(data[currentIndex]);
            }
          });
        })
        .catch(err => {
          console.error("Error loading data", err);
        });
    };
  </script>

</body>
</html>
